@page
@model Infrastructure.Identity.RegisterModel
@{
    ViewData["Title"] = "Register";
}

@using Microsoft.Extensions.Options
@using Application

@inject IOptions<GoogleCaptchaConfig> GoogleCaptchaConfig
@* <h1>@ViewData["Title"]</h1> *@

<div id="register__container">
     <div class="card card--w-33">
        <div class="card__content">
            <div class="bg-top"></div>
            <div class="bg-bottom"></div>
            <header class="card__header-center">
                <h4 class="card__header__title">Welcome!</h4>
                <label class="card__header__subtitle"><span>Let's play some reversi!</span></label>
            </header>

            <section class="card__content">
                <form asp-route-returnUrl="@Model.ReturnUrl" method="post" >
                    <input type="hidden" id="LoginViewModelToken" asp-for="@Model.Input.RecaptchaToken"/>
                    @* <div class="card__progress">
                        <div class="line line-left"></div>
                        <div class="card__progress__icon"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"/></svg></div>
                        <div class="line line-middle"></div>
                        <div class="card__progress__icon"><svg  viewBox="0 0 24 24"><path fill="currentColor" d="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/></svg></div>
                        <div class="line line-right"></div>
                    </div> *@
                    
                    
                    <recaptcha/>
                    @await Component.InvokeAsync("RegisterUE")

                    @*<div class="input-group">
                        <input asp-for="Input.UserName" placeholder=" " required autocomplete="off"/>
                        
                        <label asp-for="Input.UserName">
                            <svg xmlns="http://www.w3.org/2000/svg" class="material-svg" fill="currentColor" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"/></svg>
                            <span>Username</span>
                        </label>
                        <p class="foot__note">
                            <span asp-validation-for="Input.UserName"></span>
                        </p>
                    </div>

                    <div class="input-group">
                        <input asp-for="Input.Email" placeholder=" " required autocomplete="off"/>
                        
                        <label asp-for="Input.Email">
                            <svg class="material-svg" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M22 6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6M20 6L12 11L4 6H20M20 18H4V8L12 13L20 8V18Z" />
                            </svg>
                            <span>Email</span>
                        </label>
                        <p class="foot__note">
                            <span asp-validation-for="Input.Email"></span>
                        </p>
                    </div>*@
                    @* <div class="input-group">
                        <input asp-for="Input.Password" placeholder=" " autocomplete="off" required/>
                                
                        <label asp-for="Input.Password">
                            <svg class="material-svg" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                            </svg>
                            <span>Password</span>
                        </label>

                        <p class="foot__note">
                            <span asp-validation-for="Input.Password" class="text-danger"></span>
                        </p>
                    @* <label asp-for="Omschrijving" class="control-label"></label>
                        <input asp-for="Omschrijving" class="form-control"/>
                    </div> *@
                    <div class="input-group">
                        <input id="register__password" asp-for="Input.Password" placeholder=" " autocomplete="password" required/>
                        
                        <label asp-for="Input.Password">
                            <svg class="material-svg" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                            </svg>
                            <span>Password</span>
                        </label>

                        <span class="show__password__icon material-icons">
                            visibility
                        </span>

                        <span class="hide__password__icon material-icons">
                            visibility_off
                        </span>
                        <aside class="password__strength__checker">
                            <h3>Password must include:</h3>
                            <ul>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    12-128 Characters
                                </li>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    At least one capital letter
                                </li>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    At least one lowercase letter
                                </li>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    At least one number
                                </li>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    At least one non alphanumeric character
                                </li>
                            </ul>
                        </aside>
                        <p class="foot__note">
                            <span></span>
                            @* <span asp-validation-for="Input.Password" class="text-danger"></span> *@
                        </p>
                    </div>

                    <div class="input-group">
                        <input id="register__confirm__password" asp-for="Input.ConfirmPassword" placeholder=" " autocomplete="confirm-password" required/>
                        <label asp-for="Input.ConfirmPassword">
                            <svg class="material-svg" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M12,17C10.89,17 10,16.1 10,15C10,13.89 10.89,13 12,13A2,2 0 0,1 14,15A2,2 0 0,1 12,17M18,20V10H6V20H18M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V10C4,8.89 4.89,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z"/>
                            </svg>
                            <span>Confirmation Password</span>
                        </label>

                        <span class="show__password__icon material-icons">
                            visibility
                        </span>

                        <span class="hide__password__icon material-icons">
                            visibility_off
                        </span>
                        <aside class="password__strength__checker">
                            <h3>Password must include:</h3>
                            <ul>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    12-128 Characters
                                </li>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    At least one capital letter
                                </li>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    At least one lowercase letter
                                </li>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    At least one number
                                </li>
                                <li class="none">
                                    <span class="material-icons">
                                        close
                                    </span>
                                    At least one non alphanumeric character
                                </li>
                            </ul>
                        </aside>
                        <p class="foot__note">
                            <span></span>
                            @* <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span> *@
                        </p>
                    </div>
                    @* <div class="form-group">
                        <label asp-for="Input.Email"></label>
                        <input asp-for="Input.Email" class="form-control" />
                        <span asp-validation-for="Input.Email" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Input.Password"></label>
                        <input asp-for="Input.Password" class="form-control" />
                        <span asp-validation-for="Input.Password" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Input.ConfirmPassword"></label>
                        <input asp-for="Input.ConfirmPassword" class="form-control" />
                        <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
                    </div> *@
                    @* <div asp-validation-summary="All" class="text-danger"></div> *@
                    
                    <div id="register__actions">
                        <div class="link">
                            <a asp-page="./Login">
                                <span class="material-icons">
                                    arrow_back
                                </span>
                                <p>
                                    Back To Login
                                </p>
                            </a>
                        </div>
                        
                        
                        <button type="submit" class="btn blue w30">Register</button>
                    </div>
                    
                </form>
            </section>
        </div> 
    </div>
   @* <div class="col-md-6 col-md-offset-2">
        <section>
            <h4>Use another service to register.</h4>
            <hr />
            @{
                if ((Model.ExternalLogins?.Count ?? 0) == 0)
                {
                    <div>
                        <p>
                            There are no external authentication services configured. See <a href="https://go.microsoft.com/fwlink/?LinkID=532715">this article</a>
                            for details on setting up this ASP.NET application to support logging in via external services.
                        </p>
                    </div>
                }
                else
                {
                    <form id="external-account" asp-page="./ExternalLogin" asp-route-returnUrl="@Model.ReturnUrl" method="post" class="form-horizontal">
                        <div>
                            <p>
                                @foreach (var provider in Model.ExternalLogins)
                                {
                                    <button type="submit" class="btn btn-primary" name="provider" value="@provider.Name" title="Log in using your @provider.DisplayName account">@provider.DisplayName</button>
                                }
                            </p>
                        </div>
                    </form>
                }
            }
        </section>
    </div>*@
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="https://www.google.com/recaptcha/api.js?render=@GoogleCaptchaConfig.Value.SiteKey"></script>
    <script>
        function getCaptchaToken() {
            grecaptcha.ready(function() {
                grecaptcha.execute('@GoogleCaptchaConfig.Value.SiteKey', {action: 'submit'}).then(function(token) {
                    // Add your logic to submit to your backend server here.
                    @* console.log(token); *@
                    document.getElementById("LoginViewModelToken").value = token;
                });
            });
        };

        setInterval(getCaptchaToken, 115000);

        $(function() {
            getCaptchaToken();
        });
    </script>
    @*<script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>*@

    <recaptcha-script/>
}
